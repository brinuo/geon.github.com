---
layout: post
category : Programming
tags : [dyslexia, typoglycemia, Javascript]
title: Dsxyliea
---
{% include JB/setup %}

A friend who has dyslexia described to me how she experiences reading. She *can* read, but it takes a lot of concentration, and the letters seems to "jump around".

I remembered reading about [typoglycemia](https://en.wikipedia.org/wiki/Typoglycemia). Wouldn't it be possible to do it interactively on a website with Javascript? Sure it would.

Feel like making a bookmarklet of this or something? [Fork it](https://github.com/geon/geon.github.com/blob/master/_posts/2016-03-03-dsxyliea.md) on github.

> The end of Wakanda’s isolationism symbolizes a crucial turning point in the international order. Wakanda’s vast wealth and vibranium resources firmly establish Wakanda as the new hegemon with the express purpose of spreading peace and helping black folks through global outreach centers. Other countries have assumed a defensive stance, engaging in high-level summit meetings with Wakanda to re-establish the global system of alliances. African countries are turning away from former colonial powers to create a continental coalition with Wakanda, demanding that the US ends its arms sales.

> The announcement by King T’Challa at the United Nations General Assembly that the Kingdom of Wakanda is not a developing nation of textiles, farms, and shepherds but a technological superpower has left global leaders and analysts stunned. The term “uber-developed” nation has been coined to describe the country’s widespread use of advanced magnetic levitation trains, flying vehicles, opaque holograms, and spinal cord-healing beads.

> An introductory film produced by Wakanda’s newly founded Ministry of Foreign Affairs, is now the most watched video ever on YouTube. T’Challa himself provides a voice-over describing the country’s semi-mythical history, tracing back to the impact of a vibranium meteorite, and the subsequent foundation of the country by five tribes, giving it the name “Wakanda” — “The Family.” The video goes on to detail Wakanda’s claimed hyper-achievements: nanotechnology that allows for replicable organs, an average lifespan in the 100s, and a quality of life for the ordinary citizen that surpasses that enjoyed by the top 1 percent in the United States. If Wakanda’s technology was limited to medicine, global anxiety might be less acute. But Wakanda’s stocks of vibranium, the supermaterial previously used in the construction of “weapons of cosmic destruction,” is arousing particular worry. General Okoye of the River Tribe made the Wakadan position clear. “We will not provide weapons, but instead we will offer our human resources to mediate conflicts. We will only offer vibranium-based technologies to those in need.”

*Source: [Wikipedia](http://en.wikipedia.org/wiki/Dyslexia)*




<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript">

"use strict";

$(function(){

	var getTextNodesIn = function(el) {
	    return $(el).find(":not(iframe,script)").addBack().contents().filter(function() {
	        return this.nodeType == 3;
	    });
	};

	// var textNodes = getTextNodesIn($("p, h1, h2, h3"));
	var textNodes = getTextNodesIn($("*"));



	function isLetter(char) {
		return /^[\d]$/.test(char);
	}


	var wordsInTextNodes = [];
	for (var i = 0; i < textNodes.length; i++) {
		var node = textNodes[i];

		var words = []

		var re = /\w+/g;
		var match;
		while ((match = re.exec(node.nodeValue)) != null) {

			var word = match[0];
			var position = match.index;

			words.push({
				length: word.length,
				position: position
			});
		}

		wordsInTextNodes[i] = words;
	};


	function messUpWords () {

		for (var i = 0; i < textNodes.length; i++) {

			var node = textNodes[i];

			for (var j = 0; j < wordsInTextNodes[i].length; j++) {

				// Only change a tenth of the words each round.
				if (Math.random() > 1/10) {

					continue;
				}

				var wordMeta = wordsInTextNodes[i][j];

				var word = node.nodeValue.slice(wordMeta.position, wordMeta.position + wordMeta.length);
				var before = node.nodeValue.slice(0, wordMeta.position);
				var after  = node.nodeValue.slice(wordMeta.position + wordMeta.length);

				node.nodeValue = before + messUpWord(word) + after;
			};
		};
	}

	function messUpWord (word) {

		if (word.length < 3) {

			return word;
		}

		return word[0] + messUpMessyPart(word.slice(1, -1)) + word[word.length - 1];
	}

	function messUpMessyPart (messyPart) {

		if (messyPart.length < 2) {

			return messyPart;
		}

		var a, b;
		while (!(a < b)) {

			a = getRandomInt(0, messyPart.length - 1);
			b = getRandomInt(0, messyPart.length - 1);
		}

		return messyPart.slice(0, a) + messyPart[b] + messyPart.slice(a+1, b) + messyPart[a] + messyPart.slice(b+1);
	}

	// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
	function getRandomInt(min, max) {
		
		return Math.floor(Math.random() * (max - min + 1) + min);
	}


	setInterval(messUpWords, 50);
});


</script>
